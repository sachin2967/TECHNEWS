<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoFeed</title>
    <link rel="stylesheet" href="static/style.css">
    <style>
        .background-image {
    background-image: url("{{ image_url }}");
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
     
    width: 614px;
    height: 700px;
    display: block;
    margin: 0 auto;
    position: relative;
}
    </style>
    
    
</head>
<body>
    
    <div class="autofeed">
       <div> <p>Developed by <span class="animation">Sachin Yadav</span></p></div>
       <div>
        <h1><a id="auto" href="/"><span class="animation">AutoFeed</span></a></h1>
    </div>
       <div class="contact-links animation">
        <a href="mailto:sachinyadav2967@gmail.com">Email</a>
        <a href="https://github.com/">GitHub</a>
        <a href="https://linkedin.com/in/">LinkedIn</a>
    </div>
    </div>
    <hr>
        
    
    
    <form action="/" method="POST">
        <div class="button-container">
            <button type="submit" class="{{ 'dark' if header == 'LATEST' else '' }}" name="section_number" value="0">LATEST</button>
            <button type="submit" class="{{ 'dark' if header == 'INDIA' else '' }}" name="section_number" value="1">INDIA</button>
            <button type="submit" class="{{ 'dark' if header == 'CITIES' else '' }}" name="section_number" value="2">CITIES</button>
            <button type="submit" class="{{ 'dark' if header == 'WORLD-NEWS' else '' }}" name="section_number" value="3">WORLD-NEWS</button>
            <button type="submit" class="{{ 'dark' if header == 'EDUCATION' else '' }}" name="section_number" value="4">EDUCATION</button>
            <button type="submit" class="{{ 'dark' if header == 'SCIENCE' else '' }}" name="section_number" value="5">SCIENCE</button>
            <button type="submit" class="{{ 'dark' if header == 'PEOPLE' else '' }}" name="section_number" value="6">PEOPLE</button>
        </div>
        
    </form>
    
    
    <div class ="background-image">
        <div class="news-container">
            {% if News %}
                <h2> NEWS: {{ header }}</h2>
                <ul class="news-list" >
                    {% for article in News.split('\n') %}
                        {% if article %}
                            <li>{{ article }}</li>
                        {% endif %}
                    {% endfor %}
                </ul>
            {% endif %}
        </div>
        <div class="image-credits">
            <p id="present-date"></p>
        </div>
    </div>
    
   <button class="download-button" onclick="download()">Download</button> </div>

    
</body>
<script src="static/script.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.2/html2canvas.min.js"></script>
<script>
    function download() {
    html2canvas(document.querySelector(".background-image"), { useCORS: true }).then(canvas => {
        var link = document.createElement('a');
        link.download = 'AutoFeed.png';

        // Set the background image explicitly on the canvas
        canvas.style.backgroundImage = 'url("{{ image_url }}")';

        link.href = canvas.toDataURL();
        link.click();
    });
}
</script>

</html>